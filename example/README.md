# confctl example configuration
There are four skeleton deployments:

* `nixos-machine` to deploy a standard NixOS machine
* `vpsadminos-machine` to deploy vpsAdminOS machine
* `vpsadminos-container` to deploy to a container running on vpsAdminOS
* `vpsfreecz-container` to deploy to a VPS at [vpsFree.cz](https://vpsfree.org),
  which is the same as `vpsadminos-container`

## Usage
1. Enter `nix-shell`:
```
nix-shell
```

2. Update software pins:
```
confctl swpins channel update
```

3. Edit configurations in `cluster/` to your liking.

Note that to deploy physical machines, you have to supply `hardware.nix` file,
which is generated by `nixos-generate-config` when installing NixOS, you'll find
it at `/etc/nixos/hardware-configuration.nix`. confctl cannot actually install
or provision a machine, it has to already be installed and running. confctl will
deploy the new system over SSH and activate it.

Target IP addresses to which the systems will be deployed to can be set
in `cluster/*/module.nix`, option `target.host`.

Configure SSH keys in `data/ssh-keys.nix`.

4. Build and deploy
```
confctl build vpsfreecz-vps
confctl deploy vpsfreecz-vps
```
